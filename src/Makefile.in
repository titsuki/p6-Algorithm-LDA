name = %lda%
SRCS = lda.c theta.c document.c util.c path.c phi.c
OBJS = $(SRCS:.c=.o)
HEADERS	= $(SRCS:.c=.h)
LDFLAGS	= -lm

all: %DESTDIR%/resources/libraries/%lda%

clean:
	rm %DESTDIR%/resources/libraries/%lda%

%DESTDIR%/resources/libraries/%lda%: $(OBJS)
	%CC% -std=c99 %CCSHARED% %CCFLAGS% $(OBJS) -o $@

%.o: %.c %.h
	%CC% -std=c99 %CCFLAGS% -c $<

%.d: %.c
	@set -e; rm -f $@; \
	%CC% -std=c99 -M %CCFLAGS% $< > $@.$$$$; \
	sed 's,\($*\)\.o[ :]*,\1.o $@ : ,g' < $@.$$$$ > $@; \
	rm -f $@.$$$$

-include $(SRCS:.c=.d)
